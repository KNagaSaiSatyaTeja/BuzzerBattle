import { useState } from "react";
import { Button } from "@/components/ui/button";

interface BuzzerButtonProps {
  onBuzz: () => void;
  disabled?: boolean;
  buzzed?: boolean;
}

export function BuzzerButton({ onBuzz, disabled = false, buzzed = false }: BuzzerButtonProps) {
  const [isPressed, setIsPressed] = useState(false);

  const handleBuzz = () => {
    if (disabled || buzzed) return;
    
    setIsPressed(true);
    onBuzz();
    
    // Play buzzer sound effect
    try {
      const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmL7CDiR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');
      audio.volume = 0.3;
      audio.play().catch(() => {
        // Ignore sound play errors (user interaction required)
      });
    } catch (error) {
      // Ignore sound errors
    }
    
    setTimeout(() => setIsPressed(false), 200);
  };

  return (
    <Button
      data-testid="buzzer-button"
      onClick={handleBuzz}
      disabled={disabled || buzzed}
      className={`
        w-64 h-64 rounded-full text-4xl font-bold shadow-2xl transition-all transform
        ${buzzed 
          ? 'bg-gray-400 hover:bg-gray-400 cursor-not-allowed' 
          : disabled 
            ? 'bg-gray-300 hover:bg-gray-300 cursor-not-allowed'
            : 'bg-gradient-to-br from-quiz-red to-red-600 hover:from-red-600 hover:to-red-700 hover:scale-105'
        }
        ${isPressed ? 'scale-95' : ''}
        ${!disabled && !buzzed ? 'animate-pulse-slow' : ''}
      `}
    >
      <div className="flex flex-col items-center text-white">
        <i className="fas fa-hand-paper text-6xl mb-2"></i>
        <span>{buzzed ? 'BUZZED!' : 'BUZZ!'}</span>
      </div>
    </Button>
  );
}
